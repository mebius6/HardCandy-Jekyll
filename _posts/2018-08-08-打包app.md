---
layout: post
title:  "打包app"
date:   2018-08-08
tags:  js 工具
description: ''
color: 'rgb(154,133,255)'
cover: ''
---

#### 1.hbuilder
如果使用苹果证书，这里推荐一个申请iOS证书的工具 Appuploader。免苹果付费开发者账号，直接使用普通苹果id，就能使用Appuploader申请ios测试证书，打包ipa安装到非越狱设备。
工具的安装网址：[Appuploader安装](http://www.applicationloader.net/blog/zh/72.html)

免开发者账号申请iOS证书教程：[申请IOS证书](http://www.applicationloader.net/blog/zh/1073.html)
##### 授权登录插件配置manifes
[http://ask.dcloud.net.cn/article/192](http://ask.dcloud.net.cn/article/192)

#### 2.Cordova打包Vue项目
##### 第一步：安装cordova
npm install -g cordova
##### 第二步：新建cordova项目

执行命令 

```js
cordova create cordovaApp com.cordova.testapp
cd cordovaApp
cordova platform add android
```
##### 第三步：修改vue项目
首先修改vue项目的index.html  在head之间加入
```html
<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

```
这个的时候可能导致页面样式改变，如果改变则不加，否则还是建议加上。
然后引入cordova.js

```HTML
<body>
    <div id="app"></div>
    <script type="text/javascript" src="cordova.js"></script>
    <!-- built files will be auto injected -->
</body>

```
然后修改src中的main.js为以下代码

```js
// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'
Vue.config.productionTip = false

/* eslint-disable no-new */

document.addEventListener('deviceready', function() {
    new Vue({
        el: '#app',
        router,
        store,
        template: '<App/>',
        components: { App }
    })
    window.navigator.splashscreen.hide()
}, false);

```
最后修改config文件夹中的index.js文件
修改build中的

```js
 assetsSubDirectory: 'static',
        assetsPublicPath: '/',
```
为
```
   assetsSubDirectory: '',
        assetsPublicPath: '',
```
然后运行  npm run dev

看看是否能够运行起来，如果正常说明到这里是没有问题的。
##### 第四步：将vue文件放到cordova项目中并打包
先在vue项目中运行  npm run build

执行完成后会生成一个dist文件夹，找到这个文件夹将里面的所有文件复制到你的cordova项目的www文件夹下替换它原有的文件。
然后就可以执行cordova build android

会生成一个可执行的apk文件，安装即可。
到这里就完成了我们vue项目的打包。
##### 注意:
如果vue项目在运行npm run dev或者npm run build的时候遇到问题一般不是代码出错的话可以将node_modules文件夹删除使用npm install安装。
如果是因为eslint导致代码检查不通过的话，可以将Vue项目的build文件夹下的webpack.base.config文件中的rules
```js
{
              test: /\.(js|vue)$/,
              loader: 'eslint-loader',
              enforce: 'pre',
              include: [resolve('src'), resolve('test')],
              options: {
                formatter: require('eslint-friendly-formatter')
              }
            },

```
这段代码注释即可。